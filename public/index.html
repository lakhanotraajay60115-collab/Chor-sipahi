<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="title">Chor Sipahi</title> <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <style>
        :root {
            --king-color: #ffd700;
            --queen-color: #ff69b4;
            --minister-color: #1e90ff;
            --thief-color: #555;
            --sipahi-color: #28a745; 
            --primary-color: #8a2be2; 
            --background-color: #f5f5f5;
            --card-background: #ffffff;
        }
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: var(--background-color); color: #333; text-align: center; }
        .game-container { max-width: 600px; margin: 20px auto; padding: 20px; background-color: var(--card-background); border-radius: 10px; box-shadow: 0 0 20px rgba(0, 0, 0, 0.1); }
        h1 { color: var(--primary-color); }
        .role-display { padding: 15px; margin: 15px 0; border-radius: 8px; font-size: 1.2em; font-weight: bold; color: white; }
        .role-king { background-color: var(--king-color); }
        .role-queen { background-color: var(--queen-color); }
        .role-minister { background-color: var(--minister-color); }
        .role-thief { background-color: var(--thief-color); }
        .role-sipahi { background-color: var(--sipahi-color); } /* рк╕рк┐рккрк╛рк╣рлА рк░ркВркЧ */
        button { padding: 10px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        button:hover { opacity: 0.9; }
        #scoreList li { list-style: none; padding: 8px; margin: 5px 0; background-color: #eee; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        #scoreList li span:last-child { font-weight: bold; color: var(--primary-color); }
        #chatBox { border: 1px solid #ccc; height: 150px; overflow-y: scroll; padding: 10px; margin-top: 10px; text-align: left; background-color: #f9f9f9; border-radius: 5px; }
        .chat-message { margin-bottom: 5px; }
        .chat-name { font-weight: bold; color: var(--primary-color); margin-right: 5px; }
        #voteForm label { display: block; margin: 8px 0; text-align: left; }
    </style>
</head>
<body>
<div class="game-container">
    
    <div class="lang-selector"> 
        <label for="language-select" data-translate="languageLabel">ркнрк╛рк╖рк╛:</label>
        <select id="language-select" onchange="handleLanguageChange(this.value)">
            <option value="gu">ркЧрлБркЬрк░рк╛ркдрлА</option>
            <option value="hi">рд╣рд┐рдиреНрджреА</option>
            <option value="en">English</option>
        </select>
    </div>

    <h1 data-translate="appTitle">ЁЯСС ркЪрлЛрк░-рк╕рк┐рккрк╛рк╣рлА ЁЯГП</h1> <p id="gameStatus" data-translate="connecting">ркХркирлЗркХрлНркЯрк┐ркВркЧ...</p>

    <div id="nameRegistration">
        <input type="text" id="playerNameInput" placeholder="ркдркорк╛рк░рлБркВ ркирк╛рко ркжрк╛ркЦрк▓ ркХрк░рлЛ" required style="width: 100%; padding: 10px; box-sizing: border-box; margin-bottom: 10px;">
        <button id="registerButton" data-translate="registerButton">ркЬрлЛркбрк╛ркУ (Join)</button>
    </div>

    <div id="mainGame" style="display: none;">
        <p id="roundInfo" data-translate-template="roundInfo">рк░рк╛ркЙркирлНркб: рлж/рлзрлж</p>
        
        <div id="roleDisplay">ркдркорк╛рк░рлА ркнрлВркорк┐ркХрк╛: ?</div>

        <div id="voteSection">
            <h3 data-translate="votePrompt">ркХрлЛркг ркЪрлЛрк░ ркЫрлЗ? рк╡рлЛркЯ ркХрк░рлЛ:</h3>
            <div id="voteForm" style="display: flex; flex-direction: column;">
            </div>
            <button id="submitVoteButton" data-translate="submitVote">рк╡рлЛркЯ рк╕ркмркорк┐ркЯ ркХрк░рлЛ</button>
        </div>

        <div id="chatSection">
            <h3 data-translate="chatTitle">ркЦрлЗрк▓рк╛ркбрлАркУ рк╕рк╛ркерлЗ рк╡рк╛ркдркЪрлАркд</h3>
            <div id="chatBox"></div>
            <div id="chatInputContainer">
                <input type="text" id="chatMessageInput" data-translate-placeholder="chatPlaceholder" placeholder="ркорлЗрк╕рлЗркЬ рк▓ркЦрлЛ...">
                <button id="sendChatButton" data-translate="sendButton">ркорлЛркХрк▓рлЛ</button>
            </div>
        </div>
        
    </div>
    
    <div id="resultDisplay" style="display: none;"></div>
    <div id="scoreDisplay">
        <h3 data-translate="totalScoreTitle">ЁЯПЖ ркХрлБрк▓ рк╕рлНркХрлЛрк░</h3>
        <ul id="scoreList"></ul>
    </div>
    
    <div id="playerList">
        <h3 data-translate="activePlayersTitle">рк╕ркХрлНрк░рк┐ркп ркЦрлЗрк▓рк╛ркбрлАркУ</h3>
        <ul id="playerNamesList"></ul>
    </div>
</div>

<script src="/socket.io/socket.io.js"></script> 

<script>
    const socket = io(); 
    let myId = null;
    let players = {};
    let myRole = '';
    let currentLang = 'gu'; 
    let isHost = false;

    const MAX_PLAYERS = 8;
    const MIN_PLAYERS = 4;

    // --- ркнрк╛рк╖рк╛ркВркдрк░ ркорк╛ркЯрлЗркирлЛ ркорлБркЦрлНркп ркбрлЗркЯрк╛ ркСркмрлНркЬрлЗркХрлНркЯ ---
    const translations = {
        gu: {
            'рк░рк╛ркЬрк╛': 'рк░рк╛ркЬрк╛', 'рк░рк╛ркгрлА': 'рк░рк╛ркгрлА', 'рк╡ркЬрлАрк░': 'рк╡ркЬрлАрк░', 'ркЪрлЛрк░': 'ркЪрлЛрк░', 
            'рк╕рк┐рккрк╛рк╣рлА': 'рк╕рк┐рккрк╛рк╣рлА', 
            title: "ркЪрлЛрк░ рк╕рк┐рккрк╛рк╣рлА", // ркЯрк╛ркЗркЯрк▓ ркмркжрк▓рк╛ркпрлБркВ
            appTitle: "ЁЯСС ркЪрлЛрк░-рк╕рк┐рккрк╛рк╣рлА ЁЯГП", // ркЯрк╛ркЗркЯрк▓ ркмркжрк▓рк╛ркпрлБркВ
            languageLabel: "ркнрк╛рк╖рк╛:",
            registerButton: "ркЬрлЛркбрк╛ркУ (Join)",
            connecting: "ркХркирлЗркХрлНркЯрк┐ркВркЧ...",
            roundInfo: (round, max) => `рк░рк╛ркЙркирлНркб: ${round}/${max}`,
            waiting: (count) => `ркЦрлЗрк▓рк╛ркбрлАркУркирлА рк░рк╛рк╣ ркЬрлЛрк╡рк╛ркп ркЫрлЗ... (${count}/${MAX_PLAYERS})`, 
            totalScoreTitle: "ЁЯПЖ ркХрлБрк▓ рк╕рлНркХрлЛрк░",
            activePlayersTitle: "рк╕ркХрлНрк░рк┐ркп ркЦрлЗрк▓рк╛ркбрлАркУ",
            votePrompt: "ркХрлЛркг ркЪрлЛрк░ ркЫрлЗ? рк╡рлЛркЯ ркХрк░рлЛ:",
            submitVote: "рк╡рлЛркЯ рк╕ркмркорк┐ркЯ ркХрк░рлЛ",
            chatTitle: "ркЦрлЗрк▓рк╛ркбрлАркУ рк╕рк╛ркерлЗ рк╡рк╛ркдркЪрлАркд",
            chatPlaceholder: "ркорлЗрк╕рлЗркЬ рк▓ркЦрлЛ...",
            sendButton: "ркорлЛркХрк▓рлЛ",
            gameEnd: "ркЧрлЗрко рк╕ркорк╛рккрлНркд!",
            winner: (name, score) => `рк╡рк┐ркЬрлЗркдрк╛: ${name} (${score} рккрлЛркИркирлНркЯ)`
        },
        hi: {
            'рд░рд╛рдЬрд╛': 'рд░рд╛рдЬрд╛', 'рд░рд╛рдиреА': 'рд░рд╛рдиреА', 'рд╡рдЬреАрд░': 'рд╡рдЬреАрд░', 'рдЪреЛрд░': 'рдЪреЛрд░',
            'рд╕рд┐рдкрд╛рд╣реА': 'рд╕рд┐рдкрд╛рд╣реА', 
            title: "рдЪреЛрд░ рд╕рд┐рдкрд╛рд╣реА", // ркЯрк╛ркЗркЯрк▓ ркмркжрк▓рк╛ркпрлБркВ
            appTitle: "ЁЯСС рдЪреЛрд░-рд╕рд┐рдкрд╛рд╣реА ЁЯГП", // ркЯрк╛ркЗркЯрк▓ ркмркжрк▓рк╛ркпрлБркВ
            languageLabel: "рднрд╛рд╖рд╛:",
            registerButton: "рдЬреБрдбрд╝реЗрдВ (Join)",
            connecting: "рдХрдиреЗрдХреНрдЯрд┐рдВрдЧ...",
            roundInfo: (round, max) => `рд░рд╛рдЙрдВрдб: ${round}/${max}`,
            waiting: (count) => `рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХрд╛ рдЗрдВрддрдЬрд╝рд╛рд░ рд╣реИ... (${count}/${MAX_PLAYERS})`, 
            totalScoreTitle: "ЁЯПЖ рдХреБрд▓ рд╕реНрдХреЛрд░",
            activePlayersTitle: "рд╕рдХреНрд░рд┐рдп рдЦрд┐рд▓рд╛рдбрд╝реА",
            votePrompt: "рдХреМрди рдЪреЛрд░ рд╣реИ? рд╡реЛрдЯ рдХрд░реЗрдВ:",
            submitVote: "рд╡реЛрдЯ рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ",
            chatTitle: "рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рд╕реЗ рдмрд╛рддрдЪреАрдд",
            chatPlaceholder: "рдореИрд╕реЗрдЬ рд▓рд┐рдЦреЗрдВ...",
            sendButton: "рднреЗрдЬреЗрдВ",
            gameEnd: "рдЧреЗрдо рд╕рдорд╛рдкреНрдд!",
            winner: (name, score) => `рд╡рд┐рдЬреЗрддрд╛: ${name} (${score} рдкреЙрдЗрдВрдЯреНрд╕)`
        },
        en: {
            'King': 'King', 'Queen': 'Queen', 'Minister': 'Minister', 'Thief': 'Thief',
            'рк╕рк┐рккрк╛рк╣рлА': 'Guard', 
            title: "Chor Sipahi", // ркЯрк╛ркЗркЯрк▓ ркмркжрк▓рк╛ркпрлБркВ
            appTitle: "ЁЯСС Chor-Sipahi ЁЯГП", // ркЯрк╛ркЗркЯрк▓ ркмркжрк▓рк╛ркпрлБркВ
            languageLabel: "Language:",
            registerButton: "Join",
            connecting: "Connecting...",
            roundInfo: (round, max) => `Round: ${round}/${max}`,
            waiting: (count) => `Waiting for players... (${count}/${MAX_PLAYERS})`, 
            totalScoreTitle: "ЁЯПЖ Total Score",
            activePlayersTitle: "Active Players",
            votePrompt: "Who is the Thief? Vote:",
            submitVote: "Submit Vote",
            chatTitle: "Chat with Players",
            chatPlaceholder: "Type message...",
            sendButton: "Send",
            gameEnd: "Game Over!",
            winner: (name, score) => `Winner: ${name} (${score} points)`
        }
    };

    const roleColors = {
        'рк░рк╛ркЬрк╛': 'role-king', 'рк░рк╛ркгрлА': 'role-queen', 'рк╡ркЬрлАрк░': 'role-minister', 'ркЪрлЛрк░': 'role-thief',
        'рк╕рк┐рккрк╛рк╣рлА': 'role-sipahi', 
        'рд░рд╛рдЬрд╛': 'role-king', 'рд░рд╛рдиреА': 'role-queen', 'рд╡рдЬреАрд░': 'role-minister', 'рдЪреЛрд░': 'role-thief',
        'рд╕рд┐рдкрд╛рд╣реА': 'role-sipahi', 
        'King': 'role-king', 'Queen': 'role-queen', 'Minister': 'role-minister', 'Thief': 'role-thief',
        'Guard': 'role-sipahi' 
    };

    // --- ркмрк╛ркХрлАркирлЛ рк╕рлЛркХрлЗркЯ ркЕркирлЗ UI рк▓рлЛркЬрк┐ркХ рк╕ркорк╛рки ---
    
    // UI ркЕрккркбрлЗркЯ ркХрк░рлЛ (рклркВркХрлНрк╢ркирлНрк╕)
    function translateUI() {
        const langData = translations[currentLang] || translations.gu;

        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            if (langData[key]) {
                el.textContent = langData[key];
            }
        });
        document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
            const key = el.getAttribute('data-translate-placeholder');
            if (langData[key]) {
                el.placeholder = langData[key];
            }
        });
        
        // ркЯрк╛ркЗркЯрк▓ ркЕрккркбрлЗркЯ ркХрк░рлЛ
        document.title = langData.title;

        // рк░рк╛ркЙркирлНркб ркЗркирлНрклрлЛ ркЕрккркбрлЗркЯ (ркЬрлЛ ркЙрккрк▓ркмрлНркз рк╣рлЛркп ркдрлЛ)
        const roundInfoEl = document.getElementById('roundInfo');
        if (roundInfoEl.dataset.round && roundInfoEl.dataset.max) {
             roundInfoEl.textContent = langData.roundInfo(roundInfoEl.dataset.round, roundInfoEl.dataset.max);
        }
        
        // рк╕рлНркЯрлЗркЯрк╕ ркЕрккркбрлЗркЯ (ркЬрлЛ ркЙрккрк▓ркмрлНркз рк╣рлЛркп ркдрлЛ)
        const statusEl = document.getElementById('gameStatus');
        if (statusEl.dataset.status) {
            statusEl.textContent = langData.waiting(parseInt(statusEl.dataset.status));
        }

        // Host ркнрк╛рк╖рк╛ рк╕рк┐рк▓рлЗркХрлНркЯрк░ ркмркдрк╛рк╡рлЛ
        if (isHost) {
            document.querySelector('.lang-selector').style.display = 'block';
            document.getElementById('language-select').value = currentLang;
        }
    }

    function updatePlayerList(playerData) {
        players = {};
        playerData.forEach(p => players[p.id] = p);
        
        const list = document.getElementById('playerNamesList');
        list.innerHTML = '';
        playerData.forEach(p => {
            const item = document.createElement('li');
            item.textContent = p.name + (p.isHost ? ' (Host)' : '');
            list.appendChild(item);
        });

        const statusEl = document.getElementById('gameStatus');
        if (playerData.length < MIN_PLAYERS) {
            statusEl.dataset.status = playerData.length;
            statusEl.textContent = translations[currentLang].waiting(playerData.length);
        } else if (playerData.length >= MIN_PLAYERS && statusEl.dataset.status && parseInt(statusEl.dataset.status) < MIN_PLAYERS) {
            statusEl.textContent = translations[currentLang].waiting(playerData.length); // рк░рлАрк╕рлЗркЯ
        }
        
        if (myId && players[myId]) {
             isHost = players[myId].isHost;
             translateUI();
        }
    }

    function handleLanguageChange(lang) {
        if (isHost) {
            socket.emit('setLanguage', lang);
        }
    }

    function createVoteForm() {
        const form = document.getElementById('voteForm');
        form.innerHTML = '';
        
        const langData = translations[currentLang] || translations.gu;

        Object.values(players).filter(p => p.id !== myId).forEach(p => {
            const label = document.createElement('label');
            label.innerHTML = `
                <input type="radio" name="thiefVote" value="${p.id}" required>
                ${p.name}
            `;
            form.appendChild(label);
        });
        
        // рк╡рлЛркЯрк┐ркВркЧ рк╢рк░рлВ ркеркпрк╛ рккркЫрлА ркЬ ркмркдрк╛рк╡рлЛ
        document.getElementById('voteSection').style.display = 'block';
        document.getElementById('submitVoteButton').disabled = false;
    }

    function displayRoundResult(data) {
        const resultEl = document.getElementById('resultDisplay');
        const langData = translations[data.currentLanguage] || translations.gu;
        
        let message = `рк░рк╛ркЙркирлНркб ${data.players[myId].roundMessage}`;
        
        if (data.thiefCaught) {
            message += `<br>тЬЕ **ркЪрлЛрк░ рккркХркбрк╛ркИ ркЧркпрлЛ!** (${data.thiefName})`;
        } else {
            message += `<br>тЭМ **ркЪрлЛрк░ ркЫркЯркХрлА ркЧркпрлЛ!** (${data.thiefName} ркирлЗ +${data.thiefPointsGain} рккрлЛркИркирлНркЯ ркорк│рлНркпрк╛)`;
        }
        
        message += `<br><br>${data.nextRound}`;

        resultEl.innerHTML = message;
        resultEl.style.display = 'block';
        
        // рк╕рлНркХрлЛрк░ ркЕрккркбрлЗркЯ ркХрк░рлЛ
        updateScoreboard(data.players);
    }

    function updateScoreboard(playerData) {
        const list = document.getElementById('scoreList');
        list.innerHTML = '';
        
        const sortedPlayers = Object.values(playerData).sort((a, b) => b.totalScore - a.totalScore);

        sortedPlayers.forEach(p => {
            const item = document.createElement('li');
            item.innerHTML = `
                <span>${p.name}</span>
                <span>${p.totalScore}</span>
            `;
            list.appendChild(item);
        });
    }

    // --- Socket ркЗрк╡рлЗркирлНркЯрлНрк╕ ---

    socket.on('yourId', (id) => {
        myId = id;
    });

    socket.on('setHost', (hostStatus) => {
        isHost = hostStatus;
        if (isHost) {
            document.querySelector('.lang-selector').style.display = 'block';
        }
    });

    socket.on('languageChanged', (newLang) => {
        currentLang = newLang;
        translateUI();
    });

    socket.on('playerListUpdate', (playerData) => {
        updatePlayerList(playerData);
    });

    socket.on('newRound', (data) => {
        document.getElementById('nameRegistration').style.display = 'none';
        document.getElementById('mainGame').style.display = 'block';
        document.getElementById('resultDisplay').style.display = 'none';
        document.getElementById('voteSection').style.display = 'none'; 
        
        const roleEl = document.getElementById('roleDisplay');
        const roundInfoEl = document.getElementById('roundInfo');

        roundInfoEl.dataset.round = data.round;
        roundInfoEl.dataset.max = data.maxRounds;
        roundInfoEl.textContent = translations[data.currentLanguage].roundInfo(data.round, data.maxRounds);

        roleEl.className = 'role-display';
        roleEl.textContent = 'ркдркорк╛рк░рлА ркнрлВркорк┐ркХрк╛ рк▓рлЛркб ркеркИ рк░рк╣рлА ркЫрлЗ...';
        
        setTimeout(createVoteForm, 2000); // 2 рк╕рлЗркХркирлНркб рккркЫрлА рк╡рлЛркЯрк┐ркВркЧ рклрлЛрк░рлНрко ркмркдрк╛рк╡рлЛ
    });

    socket.on('yourRole', (role) => {
        myRole = role;
        const roleEl = document.getElementById('roleDisplay');
        const translatedRole = translations[currentLang][role] || role;
        
        roleEl.textContent = `ркдркорк╛рк░рлА ркнрлВркорк┐ркХрк╛: ${translatedRole}`;
        roleEl.classList.add(roleColors[role] || 'role-default');

        if (role === 'ркЪрлЛрк░' || role === 'Chor' || role === 'Thief') {
            document.getElementById('voteSection').style.display = 'none'; // ркЪрлЛрк░ рк╡рлЛркЯ рки ркХрк░рлА рк╢ркХрлЗ
        }
    });

    socket.on('voteUpdate', (data) => {
        // ркЦрлЗрк▓рк╛ркбрлАркУркП рк╡рлЛркЯ ркХрк░рлА ркжрлАркзрлЛ ркЫрлЗ, ркЪрлЗркЯркорк╛ркВ ркорлЗрк╕рлЗркЬ ркмркдрк╛рк╡рлА рк╢ркХрк╛ркп ркЫрлЗ
        const chatBox = document.getElementById('chatBox');
        const messageEl = document.createElement('div');
        messageEl.className = 'chat-message';
        messageEl.innerHTML = `<span class="chat-name">${data.message}</span>`;
        chatBox.appendChild(messageEl);
        chatBox.scrollTop = chatBox.scrollHeight;
    });

    socket.on('roundResult', (data) => {
        displayRoundResult(data);
        updateScoreboard(data.players);
    });

    socket.on('chatMessage', (data) => {
        const chatBox = document.getElementById('chatBox');
        const messageEl = document.createElement('div');
        messageEl.className = 'chat-message';
        messageEl.innerHTML = `<span class="chat-name">${data.name}:</span> ${data.message}`;
        chatBox.appendChild(messageEl);
        chatBox.scrollTop = chatBox.scrollHeight;
    });

    socket.on('gameEnd', (data) => {
        const resultEl = document.getElementById('resultDisplay');
        const langData = translations[data.currentLanguage] || translations.gu;
        
        resultEl.style.display = 'block';
        resultEl.innerHTML = `
            <h2>${langData.gameEnd}</h2>
            <p>${langData.winner(data.winner.name, data.winner.totalScore)}</p>
            <button onclick="window.location.reload()" style="background-color: #ff6347;">ркирк╡рлА ркЧрлЗрко рк╢рк░рлВ ркХрк░рлЛ</button>
        `;
        document.getElementById('mainGame').style.display = 'none';
        updateScoreboard(data.finalScores);
    });

    socket.on('serverFull', () => {
        alert("ркЧрлЗрко рк░рлВрко рклрлВрк▓ ркЫрлЗ. ркорк╣ркдрлНркдрко рло ркЦрлЗрк▓рк╛ркбрлАркУ ркЬ рк░ркорлА рк╢ркХрлЗ ркЫрлЗ.");
        window.location.reload(); 
    });


    // --- UI ркЗрк╡рлЗркирлНркЯ рк╣рлЗркирлНркбрк▓рк░рлНрк╕ ---
    document.getElementById('registerButton').addEventListener('click', () => {
        const name = document.getElementById('playerNameInput').value.trim();
        if (name) {
            socket.emit('registerName', name);
            document.getElementById('playerNameInput').disabled = true;
            document.getElementById('registerButton').disabled = true;
            document.getElementById('gameStatus').textContent = translations[currentLang].waiting(Object.keys(players).length + 1);
        }
    });

    document.getElementById('submitVoteButton').addEventListener('click', () => {
        const selectedVote = document.querySelector('input[name="thiefVote"]:checked');
        if (selectedVote) {
            socket.emit('submitVote', selectedVote.value);
            document.getElementById('submitVoteButton').disabled = true;
            document.getElementById('voteSection').style.display = 'none';
        } else {
            alert('ркХрлГрккрк╛ ркХрк░рлАркирлЗ ркХрлЛркИ ркЦрлЗрк▓рк╛ркбрлАркирлЗ рк╡рлЛркЯ ркХрк░рлЛ.');
        }
    });

    document.getElementById('sendChatButton').addEventListener('click', () => {
        const input = document.getElementById('chatMessageInput');
        const message = input.value.trim();
        if (message) {
            socket.emit('chatMessage', message);
            input.value = '';
        }
    });
    
    document.getElementById('chatMessageInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            document.getElementById('sendChatButton').click();
        }
    });

    // рккрлНрк░ркерко рк▓рлЛркб рккрк░ UI ркЯрлНрк░рк╛ркирлНрк╕рк▓рлЗркЯ ркХрк░рлЛ
    translateUI();
</script>

<script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('SW registered: ', registration);
          })
          .catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
</script>
</body>
</html>
